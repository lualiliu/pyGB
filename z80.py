class Z80():
	_r={
		'a':0, 'b':0, 'c':0, 'd':0, 'e':0, 'h':0, 'l':0, 'f':0,
		'sp':0, 'pc':0, 'i':0, 'r':0,
		'm':0,
		'ime':0
	};
	_rsv={
		'a':0, 'b':0, 'c':0, 'd':0, 'e':0, 'h':0, 'l':0, 'f':0
	};
	_clock={'m':0};
	_halt=0;
	_stop=0;

	def reset():
		Z80._r['a'] = 0; Z80._r['b']=0; Z80._r['c']=0; Z80._r['d']=0; Z80._r['e']=0; Z80._r['h']=0; Z80._r['l']=0; Z80._r['f']=0;
		Z80._r['sp']=0; Z80._r['pc']=0; Z80._r['i']=0; Z80._r['r']=0;
		Z80._r['m']=0;
		Z80._halt=0; Z80._stop=0;
		Z80._clock['m']=0;
		Z80._r['ime']=1;
		print("Z80 Reset.");
	def exec():
		Z80._r['r'] = (Z80._r['r']+1) & 127;
		Z80._map[MMU.rb(Z80._r['pc']+1)]();
		Z80._r['pc'] &= 65535;
		Z80._clock['m'] += Z80._r['m'];
	_map = [];
	_cbmap = [];
	
